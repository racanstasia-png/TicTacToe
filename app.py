import os

board = [["", "", ""],
         ["", "", ""],
         ["", "", ""]]


def clear_screen():
    """–û—á–∏—â–µ–Ω–Ω—è –µ–∫—Ä–∞–Ω—É –∫–æ–Ω—Å–æ–ª—ñ"""
    os.system('cls' if os.name == 'nt' else 'clear')


def show_welcome():
    """–ü—Ä–∏–≤—ñ—Ç–∞–Ω–Ω—è —Ç–∞ –ø–æ—è—Å–Ω–µ–Ω–Ω—è –ø—Ä–∞–≤–∏–ª"""
    clear_screen()
    print("-" * 50)
    print("–•–†–ï–°–¢–ò–ö–ò-–ù–£–õ–ò–ö–ò  üéÆ".center(50))
    print("-" * 50)
    print("–õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ –¥–æ –≥—Ä–∏ —Ö—Ä–µ—Å—Ç–∏–∫–∏-–Ω—É–ª–∏–∫–∏!")
    print("-" * 50)
    print("–ü–†–ê–í–ò–õ–ê –ì–†–ò:")
    print("-" * 50)
    print("‚Ä¢ –ì—Ä–∞ –¥–ª—è –¥–≤–æ—Ö –≥—Ä–∞–≤—Ü—ñ–≤")
    print("‚Ä¢ –ì—Ä–∞–≤–µ—Ü—å 1: (X)")
    print("‚Ä¢ –ì—Ä–∞–≤–µ—Ü—å 2: (O)")
    print("‚Ä¢ –ú–µ—Ç–∞: –≤–∏—à–∏–∫—É–≤–∞—Ç–∏ 3 —Å–≤–æ—ó —Å–∏–º–≤–æ–ª–∏ –≤ —Ä—è–¥")
    print("  (–ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—ñ, –≤–µ—Ä—Ç–∏–∫–∞–ª—ñ –∞–±–æ –¥—ñ–∞–≥–æ–Ω–∞–ª—ñ)")
    print("-" * 50)
    print(" –Ø–ö –ì–†–ê–¢–ò:")
    print("-" * 50)
    print("‚Ä¢ –í–≤–µ–¥—ñ—Ç—å –Ω–æ–º–µ—Ä –∫–ª—ñ—Ç–∏–Ω–∫–∏ (1-9) –¥–ª—è —Å–≤–æ–≥–æ —Ö–æ–¥—É")
    print("‚Ä¢ –†–æ–∑—Ç–∞—à—É–≤–∞–Ω–Ω—è –∫–ª—ñ—Ç–∏–Ω–æ–∫ –Ω–∞ –ø–æ–ª—ñ:\n")
    print("     1 | 2 | 3")
    print("     ---------")
    print("     4 | 5 | 6")
    print("     ---------")
    print("     7 | 8 | 9")
    print("\n–ß–∞—Å –∫–æ–∂–Ω–æ–≥–æ —Ö–æ–¥—É –±—É–¥–µ –∑–∞—Ñ—ñ–∫—Å–æ–≤–∞–Ω–æ!")
    print("-" * 50)
    input("\n–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å Enter, —â–æ–± –ø–æ—á–∞—Ç–∏ –≥—Ä—É...")


def show_board(board):
    """–í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —ñ–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è"""
    clear_screen()
    print("–ü–æ—Ç–æ—á–Ω–µ —ñ–≥—Ä–æ–≤–µ –ø–æ–ª–µ:\n")
    for i, row in enumerate(board):
        print(" ", end="")
        for j, cell in enumerate(row):
            print(cell if cell != "" else " ", end="")
            if j < 2:
                print(" | ", end="")
        print()
        if i < 2:
            print("-----------")
    print()


def play_game():
    """–û—Å–Ω–æ–≤–Ω–∞ –ª–æ–≥—ñ–∫–∞ –≥—Ä–∏"""
    player="X"
    while True:  # —Ü–∏–∫–ª 
      show_board(board)
      # 1 –∫—Ä–æ–∫ 
      # —Ö—ñ–¥ 
      coordinates = input(f"–•—ñ–¥ {player} (1 ... 9): ")
      
      # 2 –∫—Ä–æ–∫ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏
      # –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ —á–∏—Å–ª–æ
      if not (coordinates.isdigit() and len(coordinates) == 1):
          print(" –ü–æ–º–∏–ª–∫–∞ –í–≤–µ–¥–∏ —Ä—ñ–≤–Ω–æ –æ–¥–Ω—É —Ü–∏—Ñ—Ä—É")
          continue 
      
      # –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ—Å—Ç—å –∫–æ—Ä–¥–∏–Ω–∞—Ç–∏
      if coordinates not in '123456789':
          print(" –ü–æ–º–∏–ª–∫–∞ —Ç—ñ–ª—å–∫–∏ —Ü–∏—Ñ—Ä–∏ 1, 2, 3, 4, 5, 6, 7, 8, 9")
          continue
      
      num = int(coordinates) 
      column = (num-1) % 3   
      line = (num-1) // 3

      # –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –∑–∞–π–Ω—è—Ç—ñ—Å—Ç—å
      if board[line][column] != "":
          print("–¶—è –∫–ª—ñ—Ç–∏–Ω–∫–∞ –≤–∂–µ –∑–∞–π–Ω—è—Ç–∞ —Å–ø—Ä–æ–±—É–π —ñ–Ω—à—É")
          continue
      
      #–æ–±—Ä–æ–±–∫–∞ —Ö–æ–¥—É 
      board[line][column] = player 
      winner = check_winner(board)
      if winner:
          show_board(board)
          if winner == 'Draw':
              print("–ì—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –ù—ñ—á–∏—è!")
          else:
              print(f"–ì—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –ü–µ—Ä–µ–º–æ–∂–µ—Ü—å: {winner}")
          response = input("–ë–∞–∂–∞—î—Ç–µ –∑—ñ–≥—Ä–∞—Ç–∏ —â–µ —Ä–∞–∑? (—Ç–∞–∫/–Ω—ñ): ").lower()
          if response != '—Ç–∞–∫':
              print("–î—è–∫—É—î–º–æ –∑–∞ –≥—Ä—É! –î–æ –ø–æ–±–∞—á–µ–Ω–Ω—è!")
              break
          else:
              # –°–∫–∏–¥–∞–Ω–Ω—è –≥—Ä–∏
              board_clear()
      # –ø–µ—Ä–µ–º—ñ–Ω–∞ –≥—Ä–∞–≤—Ü—è
      player = "O" if player == "X" else "X"


def board_clear():
    """–û—á–∏—â–µ–Ω–Ω—è —ñ–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è"""
    for i in range(3):
        for j in range(3):
            board[i][j] = ""


def check_winner(board):
    """–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–µ—Ä–µ–º–æ–∂—Ü—è"""
    # –í—Å—ñ –º–æ–∂–ª–∏–≤—ñ –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—ó –¥–ª—è –ø–µ—Ä–µ–º–æ–≥–∏
    win_combinations = [
        [0, 1, 2], [3, 4, 5], [6, 7, 8],  # –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—ñ
        [0, 3, 6], [1, 4, 7], [2, 5, 8],  # –í–µ—Ä—Ç–∏–∫–∞–ª—ñ
        [0, 4, 8], [2, 4, 6]              # –î—ñ–∞–≥–æ–Ω–∞–ª—ñ
    ]
    
    for combo in win_combinations:
        s1 = board[combo[0] // 3][combo[0] % 3]
        s2 = board[combo[1] // 3][combo[1] % 3]
        s3 = board[combo[2] // 3][combo[2] % 3]
        if s1 == s2 == s3 and s1 in ['X', 'O']:
            return s1

    # –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –Ω—ñ—á–∏—é
    if all(cell in ['X', 'O'] for row in board for cell in row):
        return 'Draw'
    
    return None


if __name__ == "__main__":
    show_welcome()
    play_game()
